<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="Getting Started with Ansible" /><meta property="og:locale" content="en" /><meta name="description" content="Intro Alright folks this is gonna be a long one so grab some tea. This wont be a walk through really of how to do this on your system tho there will be some simple examples to follow if you are so inclined, and to help with navigating it here’s a table of contents to keep track." /><meta property="og:description" content="Intro Alright folks this is gonna be a long one so grab some tea. This wont be a walk through really of how to do this on your system tho there will be some simple examples to follow if you are so inclined, and to help with navigating it here’s a table of contents to keep track." /><link rel="canonical" href="https://faecomputing.com/posts/ansible/" /><meta property="og:url" content="https://faecomputing.com/posts/ansible/" /><meta property="og:site_name" content="Brian Biddle" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2023-10-13T12:00:00-07:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Getting Started with Ansible" /><meta name="twitter:site" content="@twitter_username" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2024-12-20T15:49:28-08:00","datePublished":"2023-10-13T12:00:00-07:00","description":"Intro Alright folks this is gonna be a long one so grab some tea. This wont be a walk through really of how to do this on your system tho there will be some simple examples to follow if you are so inclined, and to help with navigating it here’s a table of contents to keep track.","headline":"Getting Started with Ansible","mainEntityOfPage":{"@type":"WebPage","@id":"https://faecomputing.com/posts/ansible/"},"url":"https://faecomputing.com/posts/ansible/"}</script><title>Getting Started with Ansible | Brian Biddle</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Brian Biddle"><meta name="application-name" content="Brian Biddle"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="https://avatars.githubusercontent.com/u/25892119?s=400&u=145fa93f810fec4ad1198396454af7fb0ac968ee&v=4" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Brian Biddle</a></div><div class="site-subtitle font-italic">Homelab and Cyber Security notes</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/xXKaitoNakamuraXx" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://www.linkedin.com/in/brian-biddle-165b8b211" aria-label="linkedin" target="_blank" rel="noopener"> <i class="fab fa-linkedin"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['brian.biddle.w','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Getting Started with Ansible</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>Getting Started with Ansible</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1697223600" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Oct 13, 2023 </em> </span> <span> Updated <em class="" data-ts="1734738568" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Dec 20, 2024 </em> </span><div class="d-flex justify-content-between"> <span> By <em> <a href="https://github.com/username">Brian Biddle</a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="3408 words"> <em>18 min</em> read</span></div></div></div><div class="post-content"><h1 id="intro">Intro</h1><hr /><p>Alright folks this is gonna be a long one so grab some tea. This wont be a walk through really of how to do this on your system tho there will be some simple examples to follow if you are so inclined, and to help with navigating it here’s a table of contents to keep track.</p><h1 id="what-is-ansible">What is Ansible</h1><hr /><p>Ansible is an IT automation tool. Simply put, you can automate the maintenance and creation of your infrastructure saving you time on deployments. Wether you are administering a simple homelab or orchestrating an entire datacenter it can help simplify your workload making most if not all your tasks manageable within a simple file.</p><h1 id="how-to-install">How to Install</h1><hr /><p>To ensure you always have the most up-to-date versions of Ansible and Ansible Navigator, it’s recommended to use <code class="language-plaintext highlighter-rouge">pipx</code>, a tool that avoids dependency issues and system conflicts. Here are the steps to install them:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>pipx <span class="nb">install</span> <span class="nt">--include-deps</span> ansible ansible-navigator argscomplete
</pre></table></code></div></div><p>If you want shell completion for the commands, you can add the following:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>pipx inject <span class="nt">--include-apps</span> ansible argscomplete
</pre></table></code></div></div><p>To configure <code class="language-plaintext highlighter-rouge">argscomplete</code>, follow these steps (please note that this method requires Bash 4.2 or later):</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>activate-global-python-argcomplete <span class="nt">--user</span>
</pre></table></code></div></div><p>Congratulations! You now have Ansible installed with tab completion.</p><h1 id="basic-commands">Basic Commands</h1><hr /><p>I won’t be going into detail on all the commands; that’s what manpages are for. However, I can provide a few examples of the commands you will be running and where some of the default files will be located.</p><h3 id="files-located-in-etcansible"><span class="mr-2">FIles located in /etc/ansible</span><a href="#files-located-in-etcansible" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><hr /><p>ansible.cfg</p><ul><li>This file is the default configuration file for Ansible, allowing you to specify or customize its behavior. It includes settings such as SSH configurations, default inventory files, remote users, roles paths, module paths, logging, and plugin configurations. hosts<li>Often referred to as the inventory file, this document defines the hosts and groups within your environment, along with some variables you can specify for the hosts. roles<li>This directory allows you to store specific roles that you can call and reuse in your playbooks. The common file structure for the directory is as follows:</ul><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre><span class="nv">$/</span>etc/ansible&gt; roles/

- tasks/ <span class="c">#contains the main playbook tasks for the role</span>
- handlers/ <span class="c"># contains handler tasks that can be notified by other tasks</span>
- templates/ <span class="c"># holds jinja2 templates that can be used in tasks.</span>
- files/ <span class="c"># contains files that can me copied to remote hosts</span>
- vars/ <span class="c"># stores variables specific to the role</span>
- defaults/ <span class="c">#stores default values for role variables </span>
- meta/ <span class="c"># contains metadata about the role</span>
- readme.md <span class="c"># documentation about the role</span>
</pre></table></code></div></div><ul><li>When you include a role in your playbook, Ansible will execute the tasks defined in the role’s <code class="language-plaintext highlighter-rouge">tasks/main.yml</code> file.</ul><h3 id="host-and-inventory-file-configuration"><span class="mr-2">Host and Inventory file configuration</span><a href="#host-and-inventory-file-configuration" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><hr /><p>This file is written in the .ini format and contains host information for devices you want to automate. You can define specific groups for your devices or assign variables to them, such as login credentials.</p><p>Here is an example structure:</p><div class="language-ini highlighter-rouge"><div class="code-header"> <span data-label-text="Ini"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="nn">[web_servers]</span>
<span class="err">wb1.example.com</span> 
<span class="err">192.168.0.254</span> 

<span class="nn">[db_servers]</span>
<span class="err">db1.example.com</span>
<span class="err">db2.example.com</span>

<span class="nn">[dev_env:children]</span>
<span class="err">web_servers</span>
<span class="err">db_servers</span>
</pre></table></code></div></div><p>As you can see, you can specify a machine either with a domain name or an IP address and group them together in a group by using a semicolon <code class="language-plaintext highlighter-rouge">:</code>.</p><h1 id="how-i-will-be-using-it">How I will be using it</h1><hr /><p>In my homelab, I host multiple systems, primarily Linux-based, on my network, including Docker containers. There are three primary tasks I want to be able to accomplish:</p><ol><li><strong>Update all systems:</strong> Ensure all systems are up to date.<li><strong>Initialize and set up systems and containers:</strong> Configure new systems and containers as needed.<li><strong>Automate Docker updates, installations, and configurations:</strong> Automatically manage Docker updates, installations, and configurations across the network.</ol><h3 id="updating-systems"><span class="mr-2">Updating Systems</span><a href="#updating-systems" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><hr /><p>Since I am constantly changing my homelab, I won’t be providing any specifics about what I am currently using. If you would like updated playbooks for what I am currently running, stop by my <a href="https://github.com/xXKaitoNakamuraXx/ansible">GitHub</a> and take a look.</p><p>Here is an example of how to update an Ubuntu system and a Windows system:</p><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre><td class="rouge-code"><pre><span class="nn">---</span>
<span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Update Ubuntu and Windows 10 machines</span>
  <span class="na">hosts</span><span class="pi">:</span> <span class="s">all</span>
  <span class="na">become</span><span class="pi">:</span> <span class="s">yes</span>
  <span class="na">tasks</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Update Ubuntu packages</span>
      <span class="na">apt</span><span class="pi">:</span>
        <span class="na">upgrade</span><span class="pi">:</span> <span class="s">yes</span>
        <span class="na">update_cache</span><span class="pi">:</span> <span class="s">yes</span>
      <span class="na">when</span><span class="pi">:</span> <span class="s2">"</span><span class="s">'ubuntu'</span><span class="nv"> </span><span class="s">in</span><span class="nv"> </span><span class="s">inventory_hostname"</span>

    <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Update Windows 10 using win_updates</span>
      <span class="na">win_updates</span><span class="pi">:</span>
        <span class="na">category_names</span><span class="pi">:</span> <span class="s">SecurityUpdates,UpdateRollups</span>
        <span class="na">state</span><span class="pi">:</span> <span class="s">installed</span>
      <span class="na">when</span><span class="pi">:</span> <span class="s2">"</span><span class="s">'windows'</span><span class="nv"> </span><span class="s">in</span><span class="nv"> </span><span class="s">inventory_hostname"</span>
</pre></table></code></div></div><h3 id="system-initialization"><span class="mr-2">System Initialization</span><a href="#system-initialization" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><hr /><p>Because I’m constantly changing things, having the ability to hit a delete button and run a script to rebuild everything is incredibly valuable. It’s a liberating feeling, knowing that if something goes down or gets corrupted, I can bring it back with just one command. As I mentioned before, if you want to stay updated on the playbooks I currently have in place, stop by my <a href="https://github.com/xXKaitoNakamuraXx/ansible">GitHub</a>. If you’re looking for an example of how to build a system, here’s one on setting up a web server on Ubuntu (keep in mind this doesn’t follow best practices):</p><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
</pre><td class="rouge-code"><pre><span class="nn">---</span>
<span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Setup Web Server</span>
  <span class="na">hosts</span><span class="pi">:</span> <span class="s">webserver</span>  <span class="c1"># Host group containing your target Linux system(s)</span>
  <span class="na">become</span><span class="pi">:</span> <span class="s">yes</span>  <span class="c1"># Run tasks as sudo</span>

  <span class="na">tasks</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Update apt package cache</span>
      <span class="na">apt</span><span class="pi">:</span>
        <span class="na">update_cache</span><span class="pi">:</span> <span class="s">yes</span>

    <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Install Apache web server</span>
      <span class="na">apt</span><span class="pi">:</span>
        <span class="na">name</span><span class="pi">:</span> <span class="s">apache2</span>
        <span class="na">state</span><span class="pi">:</span> <span class="s">present</span>  <span class="c1"># Ensure Apache is installed</span>

    <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Start Apache service and enable it on boot</span>
      <span class="na">service</span><span class="pi">:</span>
        <span class="na">name</span><span class="pi">:</span> <span class="s">apache2</span>
        <span class="na">state</span><span class="pi">:</span> <span class="s">started</span>
        <span class="na">enabled</span><span class="pi">:</span> <span class="s">yes</span>

    <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Ensure Apache service is running</span>
      <span class="na">wait_for</span><span class="pi">:</span>
        <span class="na">port</span><span class="pi">:</span> <span class="m">80</span>
        <span class="na">timeout</span><span class="pi">:</span> <span class="m">300</span>  <span class="c1"># Wait for 5 minutes for Apache to start</span>

</pre></table></code></div></div><h3 id="docker-automation-and-deployment"><span class="mr-2">Docker Automation and Deployment</span><a href="#docker-automation-and-deployment" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><hr /><p>Now, for the main bread and butter! Docker deployments via Ansible. This has got to be my favorite thing to do so far, and it makes my homelab deployment super quick. Because I am still writing more playbooks, please visit my <a href="https://github.com/xXKaitoNakamuraXx/ansible">GitHub</a> for my updated scripts. Just as an example, here is how I am currently deploying Portainer in my homelab.</p><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre><td class="rouge-code"><pre><span class="nn">---</span>
<span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Portainer Deployment</span>
  <span class="na">hosts</span><span class="pi">:</span> <span class="s">docker-hosts</span>
  <span class="na">tasks</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Deploy Portainer</span>
      <span class="na">community.docker.docker_container</span><span class="pi">:</span>
        <span class="na">name</span><span class="pi">:</span> <span class="s">portainer</span>
        <span class="na">image</span><span class="pi">:</span> <span class="s">portainer/portainer-ce</span>
        <span class="na">ports</span><span class="pi">:</span>
          <span class="pi">-</span> <span class="s2">"</span><span class="s">9443:9443"</span>
          <span class="pi">-</span> <span class="s2">"</span><span class="s">8000:8000"</span>
        <span class="na">volumes</span><span class="pi">:</span>
          <span class="pi">-</span> <span class="s">/var/run/docker.sock:/var/run/docker.sock</span>
          <span class="pi">-</span> <span class="s">portainer_data:data</span>
        <span class="na">restart_policy</span><span class="pi">:</span> <span class="s">always</span>
</pre></table></code></div></div><h1 id="network-and-system-automation">Network and System Automation</h1><hr /><h3 id="how-to-control-network-devices"><span class="mr-2">How to control network devices</span><a href="#how-to-control-network-devices" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><hr /><p>Your scripts can vary widely depending on your network’s complexity and specific use cases. A good starting point is <code class="language-plaintext highlighter-rouge">ansible-galaxy</code>. By checking online <a href="https://galaxy.ansible.com/">here</a>, you can search for extra plugins to assist in automating various systems. For example, there are plugins available for Cisco, Juniper, and UniFi products. In my case, I need to manage a PFSense box, so I will be using the <code class="language-plaintext highlighter-rouge">pfsensible.core</code> plugin, which can be installed using the following command:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>ansible-galaxy collection <span class="nb">install </span>pfsensible.core
</pre></table></code></div></div><p>This module enables me to manage my firewall settings via Ansible. If you’d like to see example playbooks, you can check them out on my <a href="https://github.com/xXKaitoNakamuraXx/ansible">GitHub</a>!</p><p>If you are not using PFSense and just want to try configuring something simple like <code class="language-plaintext highlighter-rouge">ufw</code> on the host then you can do so like this:</p><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre><td class="rouge-code"><pre><span class="nn">---</span>
<span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Configure ufw</span>
  <span class="na">hosts</span><span class="pi">:</span> <span class="s">host</span>
  <span class="na">become</span><span class="pi">:</span> <span class="s">yes</span>
  <span class="na">tasks</span><span class="pi">:</span>
    <span class="c1"># FIREWALL SETUP</span>
    <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Open SSH port</span>
      <span class="na">ufw</span><span class="pi">:</span>
        <span class="na">state</span><span class="pi">:</span> <span class="s">enabled</span>
        <span class="na">rule</span><span class="pi">:</span> <span class="s">allow</span>
        <span class="na">port</span><span class="pi">:</span> <span class="s2">"</span><span class="s">22"</span>
        <span class="na">proto</span><span class="pi">:</span> <span class="s">tcp</span>
</pre></table></code></div></div><h3 id="how-to-control-systems"><span class="mr-2">How to control systems</span><a href="#how-to-control-systems" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><hr /><p>You can control other systems similarly; however, most tasks can be completed with the built-in modules.</p><p>For Linux machines, you can call the module for the various package managers and execute commands just as you would in a terminal within the playbook.</p><p>Similarly, for Windows, it works the same way. Their built-in modules can assist in controlling their systems and servers as well.</p><h1 id="playbook-creation">Playbook Creation</h1><hr /><h3 id="condensing-jobs-into-playbooks"><span class="mr-2">Condensing jobs into Playbooks</span><a href="#condensing-jobs-into-playbooks" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><hr /><h4 id="playbooks"><span class="mr-2">Playbooks</span><a href="#playbooks" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><hr /><p>A playbook is a set of tasks that you want to run in a specific order or by a specific condition, all under one YAML file.</p><p>For example, if you want to update your repositories and packages on a Debian-based system, you can do the following:</p><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre><td class="rouge-code"><pre><span class="nn">---</span>
<span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Update debian servers</span>
  <span class="na">hosts</span><span class="pi">:</span> <span class="s">your_server_group</span>  <span class="c1"># Replace this with the group of servers you want to update</span>
  <span class="na">become</span><span class="pi">:</span> <span class="no">true</span>  <span class="c1"># Enable privilege escalation (sudo)</span>
 
  <span class="na">tasks</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Update apt cache</span>
      <span class="na">apt</span><span class="pi">:</span>
        <span class="na">update_cache</span><span class="pi">:</span> <span class="s">yes</span>
      <span class="na">become</span><span class="pi">:</span> <span class="no">true</span>
      
    <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Upgrade all packages</span>
      <span class="na">apt</span><span class="pi">:</span>
        <span class="na">upgrade</span><span class="pi">:</span> <span class="s">dist</span>
        <span class="na">autoremove</span><span class="pi">:</span> <span class="s">yes</span>
        <span class="na">autoclean</span><span class="pi">:</span> <span class="s">yes</span>
      <span class="na">become</span><span class="pi">:</span> <span class="no">true</span>
</pre></table></code></div></div><p>Now, let’s understand what is going on in the playbook:</p><ol><li>We defined the name of our playbook as <code class="language-plaintext highlighter-rouge">update debian servers</code>.<li>We specified the hosts we want the playbook to execute on (these are specified in our <code class="language-plaintext highlighter-rouge">inventory.ini</code> file).<li>For this task, we chose to execute it with elevated privileges via sudo, using the <code class="language-plaintext highlighter-rouge">become: true</code> directive.<li>Once that has been set, we can define the tasks we want to run. Refer to [[#Tasks]] for more information.<li>Under this section, we specify the name of the task we are performing and then execute our commands.<h4 id="tasks"><span class="mr-2">Tasks</span><a href="#tasks" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><hr /><p>Tasks are simply actions that you want to perform on the specified systems. The variables you use will vary based on your specific use case, so you will need to refer to the base documentation or the documentation for the module from <code class="language-plaintext highlighter-rouge">ansible-galaxy</code> for guidance.</p><h4 id="roles"><span class="mr-2">Roles</span><a href="#roles" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><hr /><p>Roles enable you to organize and structure your automation tasks, playbooks, and associated files in a reusable and modular manner. They promote code reusability, maintainability, and organization, making it easier to manage complex automation projects. This concept is described further under [[#Files located in /etc/ansible]].</p><h4 id="handlers"><span class="mr-2">Handlers</span><a href="#handlers" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><hr /><p>Handlers are a specific type of task used to manage service states on remote hosts, usually in response to changes made by other tasks in a playbook. They are commonly employed to ensure that specific actions, such as restarting a service or reloading a configuration, are only triggered when necessary. This reduces unnecessary service interruptions and improves playbook efficiency. Here is an example:</p></ol><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
</pre><td class="rouge-code"><pre><span class="nn">---</span>
<span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Install and configure Apache</span>
  <span class="na">hosts</span><span class="pi">:</span> <span class="s">your_servers</span>
  <span class="na">tasks</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Update apt package cache</span>
      <span class="na">apt</span><span class="pi">:</span>
        <span class="na">update_cache</span><span class="pi">:</span> <span class="s">yes</span>

    <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Install Apache web server</span>
      <span class="na">apt</span><span class="pi">:</span>
        <span class="na">name</span><span class="pi">:</span> <span class="s">apache2</span>
        <span class="na">state</span><span class="pi">:</span> <span class="s">present</span>
      <span class="na">notify</span><span class="pi">:</span> 
        <span class="pi">-</span> <span class="s">Restart Apache</span>

  <span class="na">handlers</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Restart Apache</span>
      <span class="na">service</span><span class="pi">:</span>
        <span class="na">name</span><span class="pi">:</span> <span class="s">apache2</span>
        <span class="na">state</span><span class="pi">:</span> <span class="s">restarted</span>
</pre></table></code></div></div><p>In this playbook:</p><ol><li>The first task updates the apt package cache on the target servers.<li>The second task installs the Apache web server (<code class="language-plaintext highlighter-rouge">apache2</code> package) using the <code class="language-plaintext highlighter-rouge">apt</code> module. If the package is installed or updated, it triggers the handler named <code class="language-plaintext highlighter-rouge">Restart Apache</code>.<li>The handler <code class="language-plaintext highlighter-rouge">Restart Apache</code> is defined under the <code class="language-plaintext highlighter-rouge">handlers</code> section. When notified, it restarts the Apache service using the <code class="language-plaintext highlighter-rouge">service</code> module.</ol><p>In this example, the handler will only be triggered if the Apache package is installed or updated, ensuring that the service is restarted specifically when the installation state changes.</p><h3 id="running-a-playbook"><span class="mr-2">Running a Playbook</span><a href="#running-a-playbook" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><hr /><h4 id="using-the-ansible-playbook-command"><span class="mr-2">Using the “ansible-playbook” command</span><a href="#using-the-ansible-playbook-command" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><hr /><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>ansible-playbook <span class="nt">-i</span> inventory_file playbook.yml
</pre></table></code></div></div><p>Here’s what each part of the command does:</p><ul><li><p><code class="language-plaintext highlighter-rouge">ansible-playbook</code>: This is the command used to run Ansible playbooks.</p><li><p><code class="language-plaintext highlighter-rouge">-i inventory_file</code>: Specifies the path to the inventory file, which contains information about the hosts you want to manage with Ansible. Replace <code class="language-plaintext highlighter-rouge">inventory_file</code> with the actual path to your inventory file.</p><li><p><code class="language-plaintext highlighter-rouge">playbook.yml</code>: Specifies the path to the playbook file that you want to execute. Replace <code class="language-plaintext highlighter-rouge">playbook.yml</code> with the actual path to your playbook file.</p><h4 id="using-the-ansible-navigator-command"><span class="mr-2">Using the “ansible-navigator” command</span><a href="#using-the-ansible-navigator-command" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><hr /><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>ansible-navigator run playbook.yml
</pre></table></code></div></div></ul><p>In this command:</p><ul><li><p><code class="language-plaintext highlighter-rouge">ansible-navigator run</code>: This part of the command indicates that you want to run an Ansible playbook using <code class="language-plaintext highlighter-rouge">ansible-navigator</code>.</p><li><p><code class="language-plaintext highlighter-rouge">playbook.yml</code>: Specifies the path to your playbook file. Replace <code class="language-plaintext highlighter-rouge">playbook.yml</code> with the actual path to your playbook file.</p><h1 id="authentication-methods">Authentication methods</h1><hr /><p>Now, for user credentials, you have two options: you can either store them in plain text, which is not recommended for security reasons, or you can use Ansible Vault to securely encrypt sensitive data with a password. This password should be managed in a secure manner, either in a physically secure location or by using a trusted password manager.</p></ul><h4 id="password-authentication"><span class="mr-2">Password Authentication</span><a href="#password-authentication" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><hr /><p>Just as an example, here is how you would set it up in plain text:</p><p>Add the following to your playbook.</p><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="s">ansible_user=&lt;remote-user&gt;</span>
<span class="s">ansible_password=&lt;remote-password&gt;</span>
</pre></table></code></div></div><ul><li>This is only for password authentication.<li>If you are using passwords, you need to disable host key checking.<li>Go to the <code class="language-plaintext highlighter-rouge">ansible.cfg</code> file.<li>Find <code class="language-plaintext highlighter-rouge">host_key_checking</code> and ensure it is set to <code class="language-plaintext highlighter-rouge">false</code>.</ul><p>Now, let’s get to the proper way to do this. Here is an example of using <code class="language-plaintext highlighter-rouge">ansible-vault</code>:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>ansible-vault encrypt_string <span class="s1">'my-password'</span> <span class="nt">--name</span> <span class="s1">'db-password'</span>
</pre></table></code></div></div><p>Here, we are instructing <code class="language-plaintext highlighter-rouge">ansible-vault</code> to encrypt the password “<em><strong>my-password</strong></em>” and tag it with the name “<em><strong>db-password</strong></em>”. Once executed, it will prompt for a password and generate the encrypted password.</p><p>Here is an example output:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="o">!</span>vault |
	<span class="nv">$ANSBLE_VAULT</span><span class="p">;</span>1.1<span class="p">;</span>AES256	658975795687065786089598769a75965085665085975746760945694669659564975965085497675087597650864767657660795479856976a546087659786596508497a60959568567956807547680795684356789059486367606464395395407498769647a59650835542412145907579653423412143754a597659674354234312549460707454243612a
</pre></table></code></div></div><p>With this, you can copy it and use it either in your playbook or add it to the device in your inventory file. You can also reference it within your playbook as a variable, where in this case it is named “<em><strong>db-password</strong></em>”.</p><h4 id="ssh-authentication"><span class="mr-2">SSH Authentication</span><a href="#ssh-authentication" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><hr /><p>You can also enable SSH login for the servers by first generating an SSH key pair.</p><p>Here are some examples:</p><p>This first example follows a centralized control model where your Ansible controller has control over the key pair. This can be both good and bad:</p><p>Good:</p><ul><li>Simple to deploy and manage.<li>Centralized control.</ul><p>Bad:</p><ul><li>Single point of failure: If the private key is compromised, the attacker can take over everything.<li>Lack of granular control: Limited access control for individual machines if you want to restrict access.</ul><p>Now, here are your steps:</p><ol><li>On your Ansible control machine, generate the key pair:</ol><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>ssh-keygen <span class="nt">-t</span> rsa <span class="nt">-b</span> 4096
</pre></table></code></div></div><ol><li>Next, copy the public key to the remote hosts. Make sure to change the <code class="language-plaintext highlighter-rouge">remote-user</code> to the user you want to use on the remote machine, and the <code class="language-plaintext highlighter-rouge">remote-host</code> to the domain name or IPv4 address of the remote machine:</ol><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>ssh-copy-id &lt;remote-user&gt;@&lt;remote-host&gt;
</pre></table></code></div></div><ol><li>You can test the SSH connection by making a connection with the following command:</ol><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>ssh &lt;remote-user&gt;@&lt;remote-host&gt;
</pre></table></code></div></div><ol><li>Now, update your Ansible inventory file with the user and host information.</ol><div class="language-ini highlighter-rouge"><div class="code-header"> <span data-label-text="Ini"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="nn">[web-servers]</span>
<span class="err">wb1.example.com</span> <span class="py">ansible_ssh_user</span><span class="p">=</span><span class="s">&lt;remote-user&gt; ansible_ssh_host=&lt;remote-host&gt;</span>
</pre></table></code></div></div><p>Now, for the second method, it’s a bit more complex but adds better security. You will be making an SSH key for each machine and pushing it to the remote host like before, but this time naming the SSH key file and specifying it in the <code class="language-plaintext highlighter-rouge">inventory.ini</code> file.</p><ol><li>On your Ansible control machine, generate the key pair and name it:</ol><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>ssh-keygen <span class="nt">-t</span> rsa <span class="nt">-b</span> 4096 <span class="nt">-f</span> /path/to/keyfile
</pre></table></code></div></div><ol><li>Next, copy the public key to the remote hosts. Ensure you change the <code class="language-plaintext highlighter-rouge">remote-user</code> to the user you want to use on the remote machine, and the <code class="language-plaintext highlighter-rouge">remote-host</code> to the domain name or IPv4 address of the remote machine. Make sure you specify the public key file with the <code class="language-plaintext highlighter-rouge">-i</code> option and the path to the file.</ol><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>ssh-copy-id <span class="nt">-i</span> /path/to/keyfile.pub &lt;remote-user&gt;@&lt;remote-host&gt;
</pre></table></code></div></div><ol><li>You can test the SSH connection by making a connection with the following command:</ol><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>ssh <span class="nt">-i</span> /path/to/keyfile &lt;remote-user&gt;@&lt;remote-host&gt;
</pre></table></code></div></div><ol><li>Now, update your Ansible inventory file with the user and file location information.</ol><div class="language-ini highlighter-rouge"><div class="code-header"> <span data-label-text="Ini"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="nn">[web-servers]</span>
<span class="err">wb1.example.com</span> <span class="py">ansible_ssh_user</span><span class="p">=</span><span class="s">&lt;remote-user&gt; ansible_ssh_private_key_file=/path/to/keyfile.pem</span>
</pre></table></code></div></div><h1 id="secrets-management">Secrets management</h1><hr /><p>Securing passwords, API keys, and other sensitive credentials is crucial in ensuring the safety of your deployments. With Ansible-Vault, you are able to encrypt and secure this sensitive information. Here’s how you can impliment it in your docker deployments.</p><h4 id="installing-ansible-galaxy-collection"><span class="mr-2">Installing Ansible-Galaxy Collection</span><a href="#installing-ansible-galaxy-collection" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><hr /><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>ansible-galaxy collection <span class="nb">install </span>community.docker<span class="sb">`</span>
</pre></table></code></div></div><p>Before proceeding, ensure Docker and Docker Compose are installed, along with the necessary SDK for the community.docker extension (Docker Python package).</p><h4 id="creating-a-docker-container"><span class="mr-2">Creating a Docker Container</span><a href="#creating-a-docker-container" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><hr /><p>To start off, here is a basic example of how a container can be made with the community.docker extension.</p><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre><td class="rouge-code"><pre><span class="nn">---</span>
<span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Portainer Deployment</span>
  <span class="na">hosts</span><span class="pi">:</span> <span class="s">docker-hosts</span>
  <span class="na">tasks</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Deploy Portainer</span>
      <span class="na">community.docker.docker_container</span><span class="pi">:</span>
        <span class="na">name</span><span class="pi">:</span> <span class="s">portainer</span>
        <span class="na">image</span><span class="pi">:</span> <span class="s">portainer/portainer-ce</span>
        <span class="na">ports</span><span class="pi">:</span>
          <span class="pi">-</span> <span class="s2">"</span><span class="s">9443:9443"</span>
          <span class="pi">-</span> <span class="s2">"</span><span class="s">8000:8000"</span>
        <span class="na">volumes</span><span class="pi">:</span>
          <span class="pi">-</span> <span class="s">/var/run/docker.sock:/var/run/docker.sock</span>
          <span class="pi">-</span> <span class="s">portainer_data:data</span>
        <span class="na">restart_policy</span><span class="pi">:</span> <span class="s">always</span>
</pre></table></code></div></div><p>In this example we are using the <code class="language-plaintext highlighter-rouge">docker_container</code> command to create the container. from here it is esentialy the same as creating a docker compose file. however here we do not have any secrets to protect.</p><p>In scenarios where sensitive information like API keys needs to be added to a configuration file within the container, Ansible can handle this securely using Ansible-Vault.</p><h4 id="securely-adding-api-key-to-configuration"><span class="mr-2">Securely Adding API Key to Configuration</span><a href="#securely-adding-api-key-to-configuration" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><hr /><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="pi">-</span> <span class="na">hosts</span><span class="pi">:</span> <span class="s">host</span>
  <span class="na">vars_prompt</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">api_key</span>
      <span class="na">prompt</span><span class="pi">:</span> <span class="s">Enter the API key</span>
  <span class="na">tasks</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Update API Key</span>
      <span class="na">ansible.builtin.lineinfile</span><span class="pi">:</span>
        <span class="na">path</span><span class="pi">:</span> <span class="s">/path/to/config/file</span>
        <span class="na">line</span><span class="pi">:</span> <span class="s2">"</span><span class="s">API_KEY="</span>
</pre></table></code></div></div><p>In this example we are prompting the user of this playbook to enter in the API Key before continuing on. While this can work for small or homelab deployments. For large enterprise use this can be cumbersome, and remembering lengthy, complex strings can be challenging. Ansible-Vault simplifies this process by allowing you to secure and automate sensitive data.</p><h4 id="encrypting-sensitive-data-with-ansible-vault"><span class="mr-2">Encrypting Sensitive Data with Ansible-Vault</span><a href="#encrypting-sensitive-data-with-ansible-vault" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><hr /><p>To encrypt the API key using Ansible-Vault we will need to create a file that will store all our sensitive information. To do so we can run the following command:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>vim password_file.enc
</pre></table></code></div></div><p>Now this can be anywhere but preferable within the folder structure where your playbooks are kept. We can add in our password and label it in the file in the following format</p><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="na">api_key</span><span class="pi">:</span> <span class="s">my_password123</span>
</pre></table></code></div></div><p>now you can use <code class="language-plaintext highlighter-rouge">ansible-vault</code> to encrypt the file.</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>ansible-vault encrypt password_file.enc
</pre></table></code></div></div><p>when executed it will ask for a vault password to encrypt the file. once complete, you can verify that it is encrypted. you should see something like this in the file</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="nv">$ANSIBLE_VAULT</span><span class="p">;</span>1.1<span class="p">;</span>AES256
43891207412936486234871230682346802349897231047123648732487324896213084603286408123640871326487123847132876408132640812370461230874610236408123640871236408732434876923741234021649123046032784238794927384692130423046021386498132640123640123747812340812360471236471236940234072364012374613294012360413264087132054601328740213412369460324012374601234612836402647326673263073860407820784590320410365365486235759624929
</pre></table></code></div></div><p>now you can remove the unnessesary vars in the playbook we just made so that it is cleaner and more efficient.</p><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="na">-hosts</span><span class="pi">:</span> <span class="s">host</span>
  <span class="s">gather_facts</span><span class="err">:</span> <span class="s">flase</span>
<span class="pi">-</span> <span class="na">tasks</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">name</span>
    <span class="s">ansible.builtin.lineinfile</span><span class="err">:</span>
      <span class="na">path</span><span class="pi">:</span> <span class="s">/path/to/config/file</span>
      <span class="na">line</span><span class="pi">:</span> <span class="s2">"</span><span class="s">API_KEY=</span><span class="nv"> </span><span class="s">"</span>
</pre></table></code></div></div><p>now when you go to run the playbook you will need to specify the password file. ansible will decrypt the file and use the variables that are defined just like if you defined it within the playbook.</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>ansible-playbook <span class="nt">-i</span> inventory.ini <span class="nt">-e</span> @password_file.enc <span class="nt">--ask-vault-pass</span> playbook.yaml
</pre></table></code></div></div><p>this will ask for your vault password to decrypt the file and then execute the playbook.</p><h4 id="automate-further"><span class="mr-2">Automate Further</span><a href="#automate-further" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><hr /><p>if you would like to automate this even more so that you do not have to enter in a password. you can use a password file that contains the vault password. (make sure to set proper permissions on this file so that only the ansible user can access this as to not leak the master password. this method while being more convinent, if not properly done can be worse than just having credentials in your playbooks)</p><p>for this method you just need to create a file that contains your vault password:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>vim vault-pass
</pre></table></code></div></div><p>now just add your password by itself</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="nb">cat </span>vault-pass
master-pass123
</pre></table></code></div></div><p>now simply add this to your playbook command and your good.</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>ansible-playbook <span class="nt">-i</span> inventory.ini <span class="nt">-e</span> @password_file.enc <span class="nt">--ask-vault-pass</span> vault-pass playbook.yaml
</pre></table></code></div></div><p>note that you will need to be executing this playbook as the owner of the vault-pass file otherwise it will not work.</p><h4 id="managing-credentials"><span class="mr-2">Managing Credentials</span><a href="#managing-credentials" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><hr /><p>now to edit the passwords in the vault you can either decrypt &gt; edit &gt; reencrypt, or you can use the edit command with ansible-vault. here are examples of both.</p><ol><li><code class="language-plaintext highlighter-rouge">ansible-vault edit</code></ol><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>ansible-vault edit password_file.enc
</pre></table></code></div></div><p>now you can just edit it within the terminal</p><ol><li>decrypt &gt; edit &gt; encrypt way</ol><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre>ansible-vault decrypt password_file.enc

vim password_file.enc

ansible-vault encrypt password_file.enc
</pre></table></code></div></div><p>there you have it! now you know how to manage secrets within your playbooks. now their are ways to integrate a password manager to manage the secrets tho i will not be going over that method here as it is a bit out of scope.</p><h1 id="conclusion">Conclusion</h1><hr /><p>Whewww… Thank you all for reading! I hope this was a good starting place for you to get into Ansible within your homelab. trying to find a guide that would fit my needs had me going from article to article and video to video ultimately ending in me just reading the docs and playing around. if you know any ways i can make improvements to either the projects in my git repos or information in general feel free to reach out!</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/homelab/'>homelab</a>, <a href='/categories/software/'>software</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/network/" class="post-tag no-text-decoration" >network</a> <a href="/tags/linux/" class="post-tag no-text-decoration" >linux</a> <a href="/tags/hosting/" class="post-tag no-text-decoration" >hosting</a> <a href="/tags/servers/" class="post-tag no-text-decoration" >servers</a> <a href="/tags/automation/" class="post-tag no-text-decoration" >automation</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Getting+Started+with+Ansible+-+Brian+Biddle&url=https%3A%2F%2Ffaecomputing.com%2Fposts%2Fansible%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Getting+Started+with+Ansible+-+Brian+Biddle&u=https%3A%2F%2Ffaecomputing.com%2Fposts%2Fansible%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Ffaecomputing.com%2Fposts%2Fansible%2F&text=Getting+Started+with+Ansible+-+Brian+Biddle" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Ffaecomputing.com%2Fposts%2Fansible%2F" data-toggle="tooltip" data-placement="top" title="Linkedin" target="_blank" rel="noopener" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/ansible/">Getting Started with Ansible</a><li><a href="/posts/thm-red-team-fundamentals-overview/">THM Red Team Fundamentals Overview</a><li><a href="/posts/zero-trust/">Implementing Zero-Trust in my Homelab</a><li><a href="/posts/momentum-2-writeup/">Vulnhub Momentum 2 Writeup</a><li><a href="/posts/burnincandle/">Burn in Candle - Traffic Analysis</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/hacking/">hacking</a> <a class="post-tag" href="/tags/writeup/">writeup</a> <a class="post-tag" href="/tags/linux/">linux</a> <a class="post-tag" href="/tags/web/">web</a> <a class="post-tag" href="/tags/hosting/">hosting</a> <a class="post-tag" href="/tags/servers/">servers</a> <a class="post-tag" href="/tags/networking/">networking</a> <a class="post-tag" href="/tags/active-directory/">active-directory</a> <a class="post-tag" href="/tags/blueteam/">blueteam</a> <a class="post-tag" href="/tags/docker/">docker</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/zero-trust/"><div class="card-body"> <em class="small" data-ts="1695150000" data-df="ll" > Sep 19, 2023 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Implementing Zero-Trust in my Homelab</h3><div class="text-muted small"><p> How’s it going everyone! Once again I’ve decided to give my homelab another makeover, as I often do, and to start I want to ensure that I can access my services from outside my network. The plan is...</p></div></div></a></div><div class="card"> <a href="/posts/proxmox-install/"><div class="card-body"> <em class="small" data-ts="1660244400" data-df="ll" > Aug 11, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Proxmox Install</h3><div class="text-muted small"><p> Proxmox Install Reason As discussed in my Homelab post as many who want to start off with homelab, money is an issue. therefore virtualization is our best friend. After trying out different hyp...</p></div></div></a></div><div class="card"> <a href="/posts/nellis-infosec-ctf/"><div class="card-body"> <em class="small" data-ts="1651258800" data-df="ll" > Apr 29, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Nellis AFB InfoSec CTF</h3><div class="text-muted small"><p> Nellis AFB InfoSec CTF 20220429 “Attack &amp;amp; Respond” Write-up writen by B4ndw1d7h. First Task You will have two hours to break into servers of a fictitious organization. ...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/zero-trust/" class="btn btn-outline-primary" prompt="Older"><p>Implementing Zero-Trust in my Homelab</p></a> <a href="/posts/oracle/" class="btn btn-outline-primary" prompt="Newer"><p>Checking out Oracle Database 23c</p></a></div></div></div><footer class="row pl-3 pr-3"><div class="col-12 d-flex justify-content-between align-items-center text-muted pl-0 pr-0"><div class="footer-left"><p class="mb-0"> © 2024 <a href="https://github.com/username">Brian Biddle</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/hacking/">hacking</a> <a class="post-tag" href="/tags/writeup/">writeup</a> <a class="post-tag" href="/tags/linux/">linux</a> <a class="post-tag" href="/tags/web/">web</a> <a class="post-tag" href="/tags/hosting/">hosting</a> <a class="post-tag" href="/tags/servers/">servers</a> <a class="post-tag" href="/tags/networking/">networking</a> <a class="post-tag" href="/tags/active-directory/">active-directory</a> <a class="post-tag" href="/tags/blueteam/">blueteam</a> <a class="post-tag" href="/tags/docker/">docker</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a><div id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-animation="true" data-autohide="false"><div class="toast-header"> <button type="button" class="ml-2 ml-auto close" data-dismiss="toast" aria-label="Close"> <span aria-hidden="true">&times;</span> </button></div><div class="toast-body text-center pt-0"><p class="pl-2 pr-2 mb-3">A new version of content is available.</p><button type="button" class="btn btn-primary" aria-label="Update"> Update </button></div></div><script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No results found.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script>
